<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Lux Meet â€¢ Financeiro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="host-finance.css" />
</head>
<body>

<div class="finance-container" id="app">

  <h1 class="finance-title">ğŸ’° Financeiro</h1>

  <!-- ================= CARDS ================= -->
  <div class="finance-cards">

    <div class="finance-card available">
      <small>DisponÃ­vel para saque</small>
      <strong id="availableAmount">0</strong>
      <button id="withdrawBtn" class="withdraw-btn hidden">
        Solicitar saque
      </button>
    </div>

    <div class="finance-card pending">
      <small>Ganhos pendentes</small>
      <strong id="pendingAmount">0</strong>
      <span class="hint">LiberaÃ§Ã£o em atÃ© 24h</span>
    </div>

    <div class="finance-card total">
      <small>Total acumulado</small>
      <strong id="totalAmount">0</strong>
    </div>

  </div>

  <!-- ================= HISTÃ“RICO ================= -->
  <div class="finance-history">
    <h2>ğŸ“„ HistÃ³rico de ganhos</h2>

    <div id="transactionsList" class="transactions-list">
      <p class="empty">Nenhuma transaÃ§Ã£o encontrada</p>
    </div>
  </div>

  <!-- ================= BOTÃƒO MODAL ================= -->
  <button id="openChartsBtn" class="charts-btn">
    ğŸ“Š Exibir grÃ¡ficos detalhados
  </button>
<button id="withdrawBtn" class="withdraw-btn hidden">
  Solicitar saque
</button>

</div>

<!-- ================= MODAL GRÃFICOS ================= -->
<div id="chartsModal" class="charts-modal hidden">

  <div class="charts-box">

    <!-- HEADER -->
    <div class="charts-header">
      <h2>ğŸ“Š AnÃ¡lise detalhada de ganhos</h2>
      <button id="closeChartsBtn" aria-label="Fechar">âœ•</button>
    </div>

    <!-- FILTROS (JS ready, mesmo se nÃ£o usados agora) -->
    <div class="charts-filters">
      <select id="filterPeriod">
        <option value="7">Ãšltimos 7 dias</option>
        <option value="30">Ãšltimos 30 dias</option>
        <option value="all">Todo perÃ­odo</option>
      </select>

      <select id="filterType">
        <option value="all">Todos ganhos</option>
        <option value="gift">ğŸ Presentes</option>
        <option value="private_entry">ğŸ”’ Entradas privadas</option>
      </select>
    </div>

    <!-- ================= GRÃFICOS ================= -->
    <div class="charts-grid">

      <div class="chart-box">
        <h4>ğŸ’° Ganhos por live</h4>
        <canvas id="earningsByLiveChart"></canvas>
      </div>

      <div class="chart-box">
        <h4>â±ï¸ Ganhos ao longo do tempo</h4>
        <canvas id="earningsOverTimeChart"></canvas>
      </div>

      <div class="chart-box">
        <h4>ğŸ Origem dos ganhos</h4>
        <canvas id="earningsByTypeChart"></canvas>
      </div>

      <div class="chart-box">
        <h4>âš¡ EficiÃªncia do host (tempo Ã— faturamento)</h4>
        <canvas id="efficiencyChart"></canvas>
      </div>

    </div>


    <!-- MODAL SAQUE -->
<div id="withdrawModal" class="charts-modal hidden">
  <div class="charts-box">

    <div class="charts-header">
      <h2>ğŸ’¸ Solicitar saque</h2>
      <button id="closeWithdrawBtn">âœ•</button>
    </div>

    <div class="withdraw-info">

      <div class="withdraw-card">
        <small>Saldo disponÃ­vel</small>
        <strong id="withdrawAvailable">0</strong>
      </div>

      <div class="withdraw-card">
        <small>Taxa da plataforma</small>
        <strong>10%</strong>
      </div>

      <div class="withdraw-card">
        <small>Valor mÃ­nimo</small>
        <strong>100 coins</strong>
      </div>

    </div>

    <div class="withdraw-calc">
      <h3>ğŸ§® Calculadora de saque</h3>

      <label>Valor que deseja sacar</label>
      <input
        type="number"
        id="withdrawInput"
        placeholder="Ex: 500"
        min="0"
      />

      <div class="calc-result">
        <p>Taxa (10%): <strong id="feeValue">0</strong></p>
        <p>VocÃª receberÃ¡: <strong id="netValue">0</strong></p>
      </div>

      <button id="confirmWithdrawBtn" class="withdraw-btn">
        Solicitar saque
      </button>

      <p class="withdraw-hint">
        â±ï¸ Saques sÃ£o analisados manualmente e pagos em atÃ© 48h
      </p>

    </div>

  </div>
</div>

    <!-- ================= RANKING ================= -->
    <div class="ranking-section">
      <h3>ğŸ† Lives mais lucrativas</h3>
      <ul id="rankingList" class="ranking-list">
        <li class="empty">Nenhuma live encontrada</li>
      </ul>
    </div>

  </div>
</div>

<!-- ================= FIREBASE ================= -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<!-- ================= LIBS ================= -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf-autotable"></script>

<!-- ================= APP ================= -->
<script src="firebase-init.js"></script>
<script src="host-finance.js"></script>

</body>
</html>
